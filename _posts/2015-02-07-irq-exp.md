---
layout: post
title: "中断控制器"
description: "IRQ exp"
category: embedded
tags: [embedded]
---
{% include JB/setup %}

###中断控制器

1. 不同的寄存器
2. 不同的权限
3. 触发条件

------

上电后，位于SVC模式

发生中断，IRQ模式

####中断是一种异常、发生之后

1. CPU进入异常模式
2. PC=异常入口（固定地址）

####怎么用中断： “被中断”
1. 中断发生：初始化引脚、使能中断
2. 中断处理：分辨中断源、进行不同处理、清理工作
3. 恢复“别人”的状态

####发生中断：
硬件：

1. 进入IRQ模式、切换Reg
2. PC=IRQ入口地址

软件：
3. b handleIRQ

          * 计算返回到“被中断”处的地址
          * 保存现场（寄存器）
          * 调用处理函数
               1. 分辨中断源
               2. 处理
               3. 清除：清中断
          * 恢复“被中断”程序